# Как запустить локально (dev)
 - сначала нужно запустить бекенд
    - перейти в папку apps/api
    - запустить docker-compose (поднимается база данных и редис)
    - запустить скрипт с миграциями pnpm migrate:up
    - запустить сам бекенд (pnpm run start:dev/start)
 - Запустить фронтенд приложение
    - перейти в папку apps/frontend
    - скопировать содерижимое .env.example -> .env
    - запустить скрипт pnpm run dev

# Задача:
Разработка браузерной игры "The Last of Guss", где игроки соревнуются, кто быстрее и больше натапает по виртуальному гусю, подхватившему мутацию G-42.

У раунда есть дата старта и дата завершения. Длительность раунда и cooldown должны быть конфигурируемы, достаточно чтобы они применялись при старте бекенда. Cooldown - время между датой создания раунда и датой начала. Нужно для того, чтобы игроки успели зайти на страницу раунда. Например,

.env
```dotenv
ROUND_DURATION=60 # минута на раунд
COOLDOWN_DURATION=30 # полминуты обратного отсчета
```

Правила раунда:

1 тап = 1 очко, каждый одиннадцатый тап дает 10 очков
тапать можно только в рамках активного рануда
активный раунд тот, который уже начался, но еще не закончился
Пользователи игры:

выживший – может тапать
если выжившего зовут Никита, то его тапы не считаются(в статистике показывать нули), хотя и запрос на тап работает как у обычного выжившего
admin, может создавать раунд
Роли можно назначать во время создания пользователя исходя из его имени. Например, если username - admin, то роль admin, если username Никита, то роль nikita.

Бекенд
Бекенд на postgres, nodejs и typescript(с включенным strict). ORM на выбор: sequelize, drizzle, prisma, typeorm. API framework на выбор Fastify, Nest.

Когда происходит тап по гусю нужно обеспечить консистентность данных, корректность расчета очков(учесть возможные race conditions) и состояния раунда. Например:

проверяется роль пользователя(Никита или нет)
проверяется, что раунд активен(текущее время в диапазоне от даты старта до даты завершения раунда)
увеличивается счетчик тапов и очков игрока в данном раунде
увеличивается общий счетчик очков в раунде
REST API - приемлемый вариант.

Обязательно нужно учесть возможность запускать несколько серверов с бекендом(например, 1 база и 3 nodejs app). Предполагаемый способ развёртывания: 1 база, 1 реверс прокси, 3 бекенда в докер контейнерах. Реализовывать это не нужно, только учесть в разработке, что нет привязки пользователя к определенному инстансу бекенда. compose и Dockerfile можно не писать. Для запуска достаточно реализовать просто node dist/index.js

Ожидаемая нагрузка: это тестовое задание и можно рассчитывать на кол-во выживших в раунде около 10, однако, желательно использовать масштабируемые решения.

Возможный, но не обязательный вариант роутов для REST API.

логин(с помощью куки либо токена либо токена в куке)
получение списка раундов, можно без пагинации
создание раунда
получение информации по раунду, включает инфу о победителе(если раунд завершен) и о своих очках
тап по гусю, возвращает информацию о кол-ве собственных очков
Фронтенд
Фронтенд на react, typescript, react-router, vite. UI библиотека и стейт менеджер на выбор.

3 страницы:

логин, где вводится имя и пароль, если такого в базе нет, то он создается, если есть и пароль не совпадает, то показывает ошибку под кнопкой
список текущих активных и запланированных раундов, айди раунда - ссылка на раунд, кнопка создания раунда, если пользователь админ, по нажатию сразу переводит на страницу раунда
страница раунда с его состоянием(завершен, активен, еще не начат) с гусем, по которому можно тапать если раунд активен
Ожидаем чистый код с соблюдением SOLID, корректность API, отзывчивый фронтенд.


Мокапы:
![img.png](/docs/img.png)

![img_1.png](/docs/img_1.png)

![img_2.png](/docs/img_2.png)

![img_3.png](/docs/img_3.png)

![img_4.png](/docs/img_4.png)